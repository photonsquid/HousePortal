---
layout: post
title: "Compte rendu semaine 02 - backlog, environnements et CI/CD"
tags: ["houseportal", "react", "docker", "BDD", "SQL", "CI/CD"]
category: "Reports"
date: 2022-04-17 00:00:00 -0000
---

# HousePortal - Compte rendu semaine 02

## Sommaire

- [HousePortal - Compte rendu semaine 02](#houseportal---compte-rendu-semaine-02)
  - [Sommaire](#sommaire)
    - [Introduction](#introduction)
    - [Backlog](#backlog)
    - [Premi√®re architecture de la BDD SQL](#premi√®re-architecture-de-la-bdd-sql)
    - [T√¢ches √† r√©aliser dans le courant de la semaine prochaine](#t√¢ches-√†-r√©aliser-dans-le-courant-de-la-semaine-prochaine)
    - [Environnement de d√©veloppement](#environnement-de-d√©veloppement)
    - [CI/CD](#cicd)

### Introduction
Le rapport de cette semaine aborde l'√©criture du backlog du produit, ainsi que la construction des environnements de d√©veloppement du backend autant que du front-end, et d√©finit les t√¢ches que nous pr√©voyons de r√©aliser dans le courant de la semaine prochaine.

### Backlog
- **cr√©ation de comptes (authentification √† l'aide d'un email, de Google, Facebook, Github, etc... )**  
Utilisation des diverses APIs OAuth 2.0 disponibles, et mise √† jour de la BDD. Mise en place d'un syst√®me de cookies (connexion persistante) afin d'√©viter √† l‚Äôutilisateur une reconnexion √† chaque chargement de la page.
- **enregistrement/suppression d'appareils**  
Utilisation des APIs disponibles dans le but d'enregistrer/supprimer des objets dans la liste d'appareils controlables de l‚Äôutilisateur.
- **Affichage de la liste d'objets**  
Interaction avec la base de donn√©e pour afficher la liste des objets de l‚Äôutilisateur.
- **Integration de comptes Google Home, Philips HUE, etc...**
- **Contr√¥le de ces objets**  
Envoi d'instructions et r√©cup√©ration d'informations a propos de ces objets, via les APIs disponibles.
- **Affichage d'un log (historique) des actions**
Enregistrement de chaque action de l‚Äôutilisateur dans la BDD avec pour objectif l'affichage de l'historique des √©venements et interactions avec les objets. Cette fonctionnalit√© pourra √™tre d√©sactiv√©e si besoin, dans un souci de confidentialit√©.

### Premi√®re architecture de la BDD SQL
1. users (mail / üîëid / password / OAuth 2.0)
2. devices (userId, deviceName, üîëdeviceID, type, actions, ip address)
3. history (üîëid, userId, timestamp, ipAddress, ‚Ä¶)

### T√¢ches √† r√©aliser dans le courant de la semaine prochaine
Nous avons pr√©vu d'impl√©menter la cr√©ation de comptes et l'authentification, ce qui implique d'avoir cr√©√© la page de login/register, et de pouvoir modifier la BDD, en y enregistrant les nouveaux comptes. L'authentification persistante est √©galement pr√©vue, bien qu'optionnelle.

### Environnement de d√©veloppement
Comme mentionn√© pr√©c√©demment, cette semaine a √©t√© partiellement consacr√©e √† l'initialisation des d√©p√¥ts Git, h√©berg√©s sur GitHub, et √† la cr√©ation des environnements de d√©veloppement. Le front-end est bas√© sur le framework React, et utilise le gestionnaire de packets yarn pour la gestion des d√©pendances, et l'automatisation de la compilation/ex√©cution. Le backend, lui, met en oeuvre la technologie jakarta EE, avec Jboss-Wildfly, et utilise gradle pour la gestion de ses d√©pendances. Nous avons dans les deux cas fait le choix de d√©ployer ces applications sous la forme de conteneurs Docker, pour des raisons de facilit√© d'utilisation et de flexibilit√©. 

### CI/CD
Nous avons d√©cid√© de mettre en place une infrastructure CI/CD, afin de pouvoir tester rapidement les diff√©rents composants du produit, et de pouvoir les d√©ployer sur le serveur. Tout commit effectu√© sur le d√©p√¥t GitHub sera automatiquement test√©, quelle que soit la branche. Le d√©ploiement ne peut avoir lieu que depuis la branche main, et peut √™tre d√©clench√© √† l'aide de mots cl√©s dans le message du commit. Ainsi, lorsqu'une fusion de demande d'extraction a lieu dans la branche main, tout message contenant la chaine `Merge & deploy` d√©clenchera le d√©ploiement de l'application. De la m√™me fa√ßon, tout commit directement effectu√© sur la branche main (r√©serv√© aux hotfix) dont le message contient le mot cl√© `trigger-cd` d√©clenchera aussi le d√©ploiement. L'image docker est d√©ploy√©e sur `ghcr.io`, la plateforme de hosting de GitHub, et nos serveurs se chargent de la t√©l√©charger et de l'installer √† chaque d√©ploiement.

Le d√©p√¥t du front-end est accessible √† [cette adresse](https://github.com/photonsquid/HousePortal "HousePortal").  
Celui du backend est accessible √† [celle-ci](https://github.com/photonsquid/HousePortal-backend "HousePortal-backend").